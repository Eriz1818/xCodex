# Release notes: xcodex v0.4.0

## Highlights

- Side-by-side diff view for clearer review and comparison workflows.
- Plan mode now toggles with `Shift+Tab`, so `/plan` is no longer required.
- Plan mode now supports `default` (Codex-style), `adr-lite`, and `custom` workflows.
- Custom workflow templates can be seeded from `default` or `adr-lite`.
- Expanded Plan mode with richer planning and execution options.
- Improved mode UX and discoverability across TUI/TUI2.
- Durable plan-file CLI commands are available (`xcodex plan status|list|open|done|archive`).

## Side-by-side diff

- Added side-by-side diff rendering to make patch comparisons faster to scan and validate.

## Plan mode activation

- You can enter or exit Plan mode instantly with `Shift+Tab` from the TUI.
- This removes the need to invoke `/plan` just to switch modes.

## Plan options and UX

- Plan mode now includes more options for managing steps and execution flow.
- Mode-state cues are clearer, improving discoverability and reducing context switching friction.
- Workflow mode selection supports `default`, `adr-lite`, and `custom`.
- Custom mode supports creating/reseeding your template from `default` or `adr-lite`.

## Durable plan files and CLI

- Added CLI plan operations for durable workflows: `status`, `list`, `open`, `done`, and `archive`.
- Plan files remain manageable outside the TUI when scripting or reviewing in terminal-first workflows.

## Repo-aware base-dir guidance

- When plan `base_dir` points inside a git worktree and is not ignored, xcodex provides a one-time reminder to add a `.gitignore` rule.

## Post-retag fixes included in 0.4.0

- Fixed approval response routing so Plan mode and exclusion prompts no longer risk indefinite waiting after submission.
- Improved worktree/branch dedupe status rendering to show both branch and worktree context more clearly.
- Added clearer highlighting in exclusion approval prompts so matched content, layer, and reason are easier to scan.
